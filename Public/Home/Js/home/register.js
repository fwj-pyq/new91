var checkuser=!1;if($.cookie("captcha")){var count=$.cookie("captcha"),btn=$("#getting");btn.val(count+"秒后可重新获取").attr("disabled",!0).css("cursor","not-allowed");var resend=setInterval(function(){count--,count>0?(btn.val(count+"秒后可重新获取").attr("disabled",!0).css("cursor","not-allowed"),$.cookie("captcha",count,{path:"/",expires:1/86400*count})):(clearInterval(resend),btn.val("获取验证码").removeClass("disabled").removeAttr("disabled style"))},1e3)}$("#getting").click(function(){var btn=$(this),count=60,mobile=$('#registerForm input[name="mobile"]').val(),myreg=/^(1[3|4|5|7|8]\d{9})$/;if(""==mobile)return $('#registerForm input[name="mobile"]').addClass("reg_validate_tex"),$("#mobileError").show(),!1;if(!myreg.test(mobile))return $(this).addClass("subs_hint"),$("#mobileError").html("<i></i>请输入正确的手机号"),$("#mobileError").show(),!1;var mobileExists=!1;return $.ajax({url:"/member/checkusermobile.html",type:"POST",data:"mobile="+mobile,async:!1,success:function(d){var result=eval("("+d+")");1==result.flag&&($("#mobileError").html("<i></i>"+result.msg),$("#mobileError").show(),mobileExists=!0)}}),!mobileExists&&void $.ajax({url:"/member/sendmessage",type:"POST",data:"mobile="+mobile,success:function(d){var result=eval("("+d+")");if(1==result.flag){var resend=setInterval(function(){count--,count>0?(btn.val(count+"秒后可重新获取"),$.cookie("captcha",count,{path:"/",expires:1/86400*count})):(clearInterval(resend),btn.val("获取验证码").removeAttr("disabled style"))},1e3);btn.attr("disabled",!0).css("cursor","not-allowed")}else $("#content").empty().append(result.msg),$(".tooltip_pers").css({display:"block"}),$(".tooltip_box").css({display:"block"})}})}),$('#registerForm input[name="name"]').blur(function(){var e=$(this).val();""==e?($("#nameError").html("<i></i>请输入您的姓名"),$(this).addClass("reg_validate_tex"),$("#nameError").show()):e.length<2||e.length>10?($("#nameError").html("<i></i>姓名为2-10个字符"),$(this).addClass("reg_validate_tex"),$("#nameError").show()):($(this).removeClass("reg_validate_tex"),$("#nameError").hide())}),$('#registerForm input[name="name"]').focus(function(){$(this).removeClass("reg_validate_tex")}),$('#registerForm input[name="mobile"]').blur(function(){var mobile=$(this).val(),myreg=/^(1[3|4|5|7|8]\d{9})$/;return""==mobile?($(this).addClass("reg_validate_tex"),$("#mobileError").show(),!1):myreg.test(mobile)?($(this).removeClass("reg_validate_tex"),$("#mobileError").hide(),void $.ajax({url:"/member/checkusermobile.html",type:"POST",data:"mobile="+mobile,success:function(d){var result=eval("("+d+")");1==result.flag&&(checkuser=!0,$("#mobileError").html("<i></i>"+result.msg),$("#mobileError").show())}})):($(this).addClass("reg_validate_tex"),$("#mobileError").html("<i></i>请输入正确的手机号"),$("#mobileError").show(),!1)}),$('#registerForm input[name="mobile"]').focus(function(){$(this).removeClass("reg_validate_tex")}),$('#registerForm input[name="msgcode"]').blur(function(){var e=$(this).val();""==e?($(this).addClass("reg_validate_tex"),$("#msgcodeError").show()):($(this).removeClass("reg_validate_tex"),$("#msgcodeError").hide())}),$('#registerForm input[name="msgcode"]').focus(function(){$(this).removeClass("reg_validate_tex")}),$('#registerForm input[name="password"]').blur(function(){var e=$(this).val();/^[a-zA-Z0-9]{6,16}$/.test(e)&&""!=e?($(this).removeClass("reg_validate_tex"),$("#passwordError").hide()):($(this).addClass("reg_validate_tex"),$("#passwordError").show())}),$('#registerForm input[name="password"]').focus(function(){$(this).removeClass("reg_validate_tex")}),$('#registerForm input[name="repassword"]').blur(function(){var e=$(this).val(),r=$('#registerForm input[name="password"]').val();""==e?($(this).addClass("reg_validate_tex"),$("#repasswordError").show()):r!=e?($(this).addClass("reg_validate_tex"),$("#repasswordError").html("<i></i>两次密码不一致"),$("#repasswordError").show()):($(this).removeClass("reg_validate_tex"),$("#repasswordError").hide())}),$('#registerForm input[name="repassword"]').focus(function(){$(this).removeClass("reg_validate_tex")}),$(".register_btn").click(function(){if(checkuser)return!1;var error=!1,name=$('#registerForm input[name="name"]').val(),mobile=$('#registerForm input[name="mobile"]').val(),msgcode=$('#registerForm input[name="msgcode"]').val(),password=$('#registerForm input[name="password"]').val(),repassword=$('#registerForm input[name="repassword"]').val(),protocol=$('#registerForm input[name="protocol"]').is(":checked");""==name&&($('#registerForm input[name="name"]').addClass("reg_validate_tex"),$("#nameError").show(),error=!0);var myreg=/^(1[3|4|5|7|8]\d{9})$/;return""==mobile?($('#registerForm input[name="mobile"]').addClass("reg_validate_tex"),$("#mobileError").show(),error=!0):myreg.test(mobile)||($('#registerForm input[name="mobile"]').addClass("reg_validate_tex"),$("#mobileError").html("<i></i>请输入正确的手机号"),$("#mobileError").show(),error=!0),""==msgcode&&($('#registerForm input[name="msgcode"]').addClass("reg_validate_tex"),$("#msgcodeError").show(),error=!0),/^[a-zA-Z0-9]{6,16}$/.test(password)&&""!=password||($('#registerForm input[name="password"]').addClass("reg_validate_tex"),$("#passwordError").show(),error=!0),""==repassword?($('#registerForm input[name="repassword"]').addClass("reg_validate_tex"),$("#repasswordError").show(),error=!0):password!=repassword&&($('#registerForm input[name="repassword"]').addClass("reg_validate_tex"),$("#repasswordError").html("<i></i>两次密码不一致"),$("#repasswordError").show(),error=!0),protocol||($("#protocolError").show(),error=!0),!error&&($.ajax({url:"/member/submitregister.html",type:"POST",data:$("#registerForm").serialize(),success:function(d){var result=eval("("+d+")");1==result.flag?($("#mobileError").html("<i></i>"+result.msg),$("#mobileError").show()):2==result.flag?($("#codeError").html("<i></i>"+result.msg),$("#codeError").show()):3==result.flag?($("#nameError").html("<i></i>"+result.msg),$("#nameError").show()):10==result.flag?window.location.href="/":($("#content").empty().append("操作失败"),$(".tooltip_pers").css({display:"block"}),$(".tooltip_box").css({display:"block"}))}}),!1)}),$(".igree_click").click(function(e){$(".igree_box").css({display:"block"}),$(".igree_box_bg").css({display:"block"})}),$(".tooltip_cloce").click(function(e){$(".igree_box").css({display:"none"}),$(".igree_box_bg").css({display:"none"})}),$(".igree_btn_img").click(function(e){$(".igree_box").css({display:"none"}),$(".igree_box_bg").css({display:"none"}),$(".reg_check").attr("checked","checked")}),$(".tooltip_cloce, .ack_btn").click(function(e){$(".tooltip_pers").css({display:"none"}),$(".tooltip_box").css({display:"none"})});