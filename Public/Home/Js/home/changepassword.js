function changCode(){var r=$(".codeimg").attr("src");r.indexOf("?")>0?$(".codeimg").attr("src",r+"&random="+Math.random()):$(".codeimg").attr("src",r.replace(/\?.*$/,"")+"?"+Math.random())}$(".codeimg").click(function(){changCode()}),$('#myform input[name="oldpassword"]').blur(function(){var r=$(this).val();""==r?($(this).addClass("pers_validate_tex"),$("#oldpasswordError").show()):($(this).removeClass("pers_validate_tex"),$("#oldpasswordError").hide())}),$('#myform input[name="newpassword"]').blur(function(){var r=$(this).val();""==r?($(this).addClass("pers_validate_tex"),$("#newpasswordError").show()):($(this).removeClass("pers_validate_tex"),$("#newpasswordError").hide())}),$('#myform input[name="newpassword2"]').blur(function(){var r=$(this).val(),s=$('#myform input[name="newpassword"]').val();""==r?($(this).addClass("pers_validate_tex"),$("#newpassword2Error").show()):s!=r?($(this).addClass("pers_validate_tex"),$("#newpassword2Error").html("<i></i>两次密码不一致"),$("#newpassword2Error").show()):($(this).removeClass("pers_validate_tex"),$("#newpassword2Error").hide())}),$('#myform input[name="code"]').blur(function(){var r=$(this).val();""==r?($(this).addClass("pers_validate_tex"),$("#codeError").show()):($(this).removeClass("pers_validate_tex"),$("#codeError").hide())}),$("#myform input").click(function(){$(this).removeClass("pers_validate_tex")}),$(".cha_save").click(function(){var error=!1,oldpassword=$('#myform input[name="oldpassword"]').val(),newpassword=$('#myform input[name="newpassword"]').val(),newpassword2=$('#myform input[name="newpassword2"]').val(),code=$('#myform input[name="code"]').val();return""==oldpassword&&($('#myform input[name="oldpassword"]').addClass("pers_validate_tex"),$("#oldpasswordError").show(),error=!0),""==newpassword&&($('#myform input[name="newpassword"]').addClass("pers_validate_tex"),$("#newpasswordError").show(),error=!0),""==newpassword2?($('#myform input[name="newpassword2"]').addClass("pers_validate_tex"),$("#newpassword2Error").show(),error=!0):newpassword!=newpassword2&&($('#myform input[name="newpassword2"]').addClass("pers_validate_tex"),$("#newpassword2Error").html("<i></i>两次密码不一致"),$("#newpassword2Error").show(),error=!0),""==code&&($('#myform input[name="code"]').addClass("pers_validate_tex"),$("#codeError").show(),error=!0),!error&&void $.ajax({url:"/UserCenter/savepassword",type:"POST",data:$("#myform").serialize(),success:function(d){var result=eval("("+d+")");changCode(),1==result.flag?($("#content").empty().append(result.msg),$(".tooltip_pers").css({display:"block"}),$(".tooltip_box").css({display:"block"}),setTimeout(function(){window.location.herf="/login?url=changepassword"},2e3)):2==result.flag?($("#codeError").html("<i></i>"+result.msg),$("#codeError").show()):3==result.flag?($("#oldpasswordError").html("<i></i>"+result.msg),$("#oldpasswordError").show()):10==result.flag?($("#content").empty().append(result.msg),$(".tooltip_pers").css({display:"block"}),$(".tooltip_box").css({display:"block"}),setTimeout(function(){window.location.href="/personal"},2e3)):($("#oldpasswordError").html("<i></i>"+result.msg),$("#oldpasswordError").show())}})}),$(".tooltip_cloce, .ack_btn").click(function(r){$(".tooltip_pers").css({display:"none"}),$(".tooltip_box").css({display:"none"})});